extends layout.pug

include utils.pug

append head
   link(rel='stylesheet' href='/stylesheets/book.css')
   link(rel="preconnect", href="https://fonts.gstatic.com")
   link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap")
   script(src='/javascripts/book.js')

block content
    div.background-image
        div(class="hidden" id="modal")
            div(class="form-container modal-content")
                h1(class="form-header") Edit Book
                form(action=`/books/${book.id}` method="post" class="user-form")
                    +field("Cover", "cover", book.cover)
                    +field("Title", "title", book.title)
                    +field("Author", "author", book.author)
                    +field("Published", "published", book.published)
                    +field("Description", "description", book.description, textarea, "Description")
                    div(class='submit-div')
                        button(type='submit' class='btn submit edit-book-btn') Submit
                        a(href=`/books/${book.id}` class='a clear') Clear
        div(class="page-content")
            //- div(class="header")
            //- div(class="book-content")
            div(class="book-cover")
                img(src=book.cover alt="No image" width="300px")
                div(class="book-button-container")
                    button(class="book-edit") Edit
                    button(class="book-delete") Delete
            div(class="book-info")
                span(class="book-title")=book.title
                span(class="book-author")=book.author
                span(class="book-published")=book.published
                p(class="book-description")=book.description
            div(class="new-review-container")
                div(class="new-review")
                    h2(class="review-header") Write a Review
                    form(class="review-form")
                        div(class="rating")
                            select(id="book-rating")
                                option(value="null") Rate the book!
                                option(value="1") ðŸ§ 
                                option(value="2") ðŸ§ ðŸ§ 
                                option(value="3") ðŸ§ ðŸ§ ðŸ§ 
                                option(value="4") ðŸ§ ðŸ§ ðŸ§ ðŸ§ 
                                option(value="5") ðŸ§ ðŸ§ ðŸ§ ðŸ§ ðŸ§ 

                        textarea(class="new-review-textarea" placeholder="Did you love the book? Hate it? Let us know....")
                        button(type="submit" class="review-button btn" id="submit-review") Submit
            div(class="existing-reviews")
                each review in reviews
                    div(class="review-container")
                        h4(class="review-author")
                            span(class="review-user-silhouette") ðŸ‘¤
                            =review.User.username
                            span(class="review-rating")
                                if review.rating===1
                                    | ðŸ§ 
                                if review.rating===2
                                    | ðŸ§ ðŸ§ 
                                if review.rating===3
                                    | ðŸ§ ðŸ§ ðŸ§ 
                                if review.rating===4
                                    | ðŸ§ ðŸ§ ðŸ§ ðŸ§ 
                                if review.rating===5
                                    | ðŸ§ ðŸ§ ðŸ§ ðŸ§ ðŸ§ 
                            span(class="review-timestamp")
                            =date
                        if review.userId===userId
                            button(review-id=`${review.id}` class="review-edit-btn btn") Edit
                            button(review-id=`${review.id}` class="review-delete-btn btn") Delete
                        p=review.review

            div(class="book-sidebar")
                form
                    select(class="bookshelves-dropdown")
                        each bookshelf in bookshelves
                            option(value=bookshelf.id)=bookshelf.name
                    button(class="btn add-book-bookshelf") Add to Bookshelf

                //- div(class="sidebar-container")
                    //- div(id="quote")
                div(class="tag-container")
                    each tag in book.Tags
                        div(class="book-tag")=tag.category
                    form(class="add-tag-form")
                        input(class="tag-input")
                        button(class="tag-btn btn") Add Tag
